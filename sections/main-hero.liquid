{% comment %}
  Hero section with options for desktop image, mobile image, or video, and an optional link.
{% endcomment %}

{%- liquid
  assign hero_link = section.settings.hero_link
-%}

<div class="main-hero">
  {%- if hero_link != blank and section.settings.enable_full_hero_link -%}
    <a href="{{ hero_link }}" class="main-hero__link">
  {%- endif -%}

  {%- if section.settings.video_url != blank -%}
    <div class="main-hero__video-wrapper">
      {%- if section.settings.video_url.type == 'youtube' -%}
        <iframe
          src="https://www.youtube.com/embed/{{ section.settings.video_url.id }}?loop=1&autoplay=1&mute=1&playlist={{ section.settings.video_url.id }}&iv_load_policy=3&controls=0&disablekb=1&showinfo=0&rel=0"
          frameborder="0"
          allow="autoplay; encrypted-media"
          allowfullscreen
          title="{{ section.settings.video_url.alt | escape }}"
          class="main-hero__video"
        ></iframe>
      {%- elsif section.settings.video_url.type == 'vimeo' -%}
        <iframe
          src="https://player.vimeo.com/video/{{ section.settings.video_url.id }}?autoplay=1&loop=1&muted=1&background=1"
          frameborder="0"
          allow="autoplay; encrypted-media"
          allowfullscreen
          title="{{ section.settings.video_url.alt | escape }}"
          class="main-hero__video"
        ></iframe>
      {%- endif -%}
    </div>
  {%- elsif section.settings.image_desktop != blank -%}
    <picture>
      {%- if section.settings.image_mobile != blank -%}
        <source
          media="(max-width: 749px)"
          srcset="{{ section.settings.image_mobile | image_url: width: section.settings.image_mobile.width }}"
        >
      {%- endif -%}
      <img
        src="{{ section.settings.image_desktop | image_url: width: section.settings.image_desktop.width }}"
        alt="{{ section.settings.image_desktop.alt | escape }}"
        width="{{ section.settings.image_desktop.width }}"
        height="{{ section.settings.image_desktop.height }}"
        class="main-hero__image"
        loading="lazy"
      >
    </picture>
  {%- else -%}
    {{ 'lifestyle-2' | placeholder_svg_tag: 'placeholder-svg placeholder main-hero__placeholder' }}
  {%- endif -%}

  {%- if hero_link != blank and section.settings.enable_full_hero_link -%}
    </a>
  {%- endif -%}

  <div class="main-hero__content-wrapper">
    <div class="main-hero__content">
      {%- if section.settings.logo != blank -%}
        <div class="main-hero__logo">
          <img
            src="{{ section.settings.logo | image_url: width: section.settings.logo.width }}"
            alt="{{ section.settings.logo.alt | escape }}"
            width="{{ section.settings.logo.width }}"
            height="{{ section.settings.logo.height }}"
            loading="lazy"
          >
        </div>
      {%- endif -%}

      {%- if section.settings.subheadline != blank -%}
        <h2 class="main-hero__subheadline">{{ section.settings.subheadline }}</h2>
      {%- endif -%}

      <div class="main-hero__buttons">
        {%- if section.settings.button_text_1 != blank and section.settings.button_link_1 != blank -%}
          <a href="{{ section.settings.button_link_1 }}" class="main-hero__button main-hero__button--primary">
            {{ section.settings.button_text_1 }}
          </a>
        {%- endif -%}

        {%- if section.settings.button_text_2 != blank and section.settings.button_link_2 != blank -%}
          <a href="{{ section.settings.button_link_2 }}" class="main-hero__button main-hero__button--secondary">
            {{ section.settings.button_text_2 }}
          </a>
        {%- endif -%}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Main Hero",
  "tag": "section",
  "class": "section-main-hero",
  "settings": [
    {
      "type": "header",
      "content": "Media"
    },
    {
      "type": "image_picker",
      "id": "image_desktop",
      "label": "Desktop Image"
    },
    {
      "type": "image_picker",
      "id": "image_mobile",
      "label": "Mobile Image",
      "info": "Optional. Uses Desktop Image if not set."
    },
    {
      "type": "video_url",
      "id": "video_url",
      "label": "Background Video URL",
      "accept": ["youtube", "vimeo"],
      "info": "Optional. Replaces images if a valid URL is provided. Autoplays muted and looped."
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo",
      "info": "Optional. Adds a logo to the hero section."
    },
    {
      "type": "text",
      "id": "subheadline",
      "label": "Subheadline",
      "default": "Your journey begins here"
    },
    {
      "type": "header",
      "content": "Buttons"
    },
    {
      "type": "text",
      "id": "button_text_1",
      "label": "Primary Button Text",
      "default": "Shop Now"
    },
    {
      "type": "url",
      "id": "button_link_1",
      "label": "Primary Button Link"
    },
    {
      "type": "text",
      "id": "button_text_2",
      "label": "Secondary Button Text",
      "default": "Learn More"
    },
    {
      "type": "url",
      "id": "button_link_2",
      "label": "Secondary Button Link"
    },
    {
      "type": "header",
      "content": "Links"
    },
    {
      "type": "url",
      "id": "hero_link",
      "label": "Hero Link",
      "info": "Optional. Used for both full-hero link and button links."
    },
    {
      "type": "checkbox",
      "id": "enable_full_hero_link",
      "label": "Enable full hero clickable link",
      "default": false,
      "info": "When enabled, the entire hero section becomes clickable using the Hero Link."
    }
  ],
  "presets": [
    {
      "name": "Main Hero"
    }
  ]
}
{% endschema %}
